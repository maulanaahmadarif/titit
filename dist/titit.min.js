"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),Titit=function(){function t(e){_classCallCheck(this,t),this.options=e,this.tweet=""}return _createClass(t,[{key:"init",value:function(){if(this.createPop(),this.selectIt(),this.tweetIt(),this.elem){var t=document.querySelector(this.options.elem).parentElement;t.addEventListener("click",function(t){if(!t.target.matches("p")){var e=document.querySelector(".titit__pop");e.classList.contains("titit__pop--show")&&e.classList.remove("titit__pop--show")}})}}},{key:"createPop",value:function(){var t=document.createElement("div"),e=document.createElement("div"),n=document.createElement("div");e.setAttribute("class","inner-pop"),e.style.fill=this.options.color||"#fff",t.style.backgroundColor=this.options.containerColor||"#000",t.setAttribute("class","titit__pop"),n.setAttribute("class","arrow-pop"),n.style.borderTopColor=this.options.containerColor||"#000",e.innerHTML='<div class="tw-share"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M21.725 5.338c-.744.47-1.605.804-2.513 1.006a3.978 3.978 0 0 0-2.942-1.293c-2.22 0-4.02 1.81-4.02 4.02 0 .32.034.63.07.94-3.31-.18-6.27-1.78-8.255-4.23a4.544 4.544 0 0 0-.574 2.01c.04 1.43.74 2.66 1.8 3.38-.63-.01-1.25-.19-1.79-.5v.08c0 1.93 1.38 3.56 3.23 3.95-.34.07-.7.12-1.07.14-.25-.02-.5-.04-.72-.07.49 1.58 1.97 2.74 3.74 2.8a8.49 8.49 0 0 1-5.02 1.72c-.3-.03-.62-.04-.93-.07A11.447 11.447 0 0 0 8.88 21c7.386 0 11.43-6.13 11.414-11.414.015-.21.01-.38 0-.578a7.604 7.604 0 0 0 2.01-2.08 7.27 7.27 0 0 1-2.297.645 3.856 3.856 0 0 0 1.72-2.23"></path></svg></div>',t.appendChild(e),t.appendChild(n),document.body.appendChild(t)}},{key:"selectIt",value:function(){var t=this,e=document.querySelectorAll(""+this.options.elem);e&&e.forEach(function(e){return e.addEventListener("mouseup",function(){return t.showPop()})})}},{key:"tweetIt",value:function(){var t=this,e=document.querySelector(".tw-share");e.addEventListener("click",function(){t.popUp(t.tweet,"Share",600,300);var e=document.querySelector(".titit__pop");e.classList.remove("titit__pop--show")})}},{key:"popUp",value:function(t,e,n,o){var i=void 0!==window.screenLeft?window.screenLeft:screen.left,c=void 0!==window.screenTop?window.screenTop:screen.top,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,l=r/2-n/2+i,a=s/2-o/2+c,d=window.open(t,e,"scrollbars=yes, width="+n+", height="+o+", top="+a+", left="+l);window.focus&&d.focus()}},{key:"showPop",value:function(){var t=window.getSelection(),e=t.toString().trim(),n=document.querySelector(".titit__pop");if(1>e)return void n.classList.remove("titit__pop--show");var o=t.getRangeAt(0).getBoundingClientRect();n.classList.add("titit__pop--show");var i={x:o.x,y:o.y-(n.offsetHeight+5),w:Math.floor(o.width/2)};n.style.top=i.y+window.scrollY+"px",n.style.left=i.x+window.scrollX+i.w+"px";var c=e.split(" "),r=[];c.forEach(function(t){var e=r.join(" ").length+t.length;e<274-window.location.href.length&&r.push(t)});var s=encodeURI("“"+r.join(" ")+"”"),l=encodeURI(window.location.href),a="https://twitter.com/intent/tweet/?text="+s+"&url="+l;this.tweet=a}}]),t}();